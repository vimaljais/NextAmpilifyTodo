{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/vimal/Desktop/project v2/AmplifyTest/AMPLIFYNEXT/next-amplified/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"C:/Users/vimal/Desktop/project v2/AmplifyTest/AMPLIFYNEXT/next-amplified/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _asyncToGenerator from \"C:/Users/vimal/Desktop/project v2/AmplifyTest/AMPLIFYNEXT/next-amplified/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:/Users/vimal/Desktop/project v2/AmplifyTest/AMPLIFYNEXT/next-amplified/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n// pages/index.js\nimport { AmplifyAuthenticator } from \"@aws-amplify/ui-react\";\nimport { Amplify, API, Auth } from \"aws-amplify\";\nimport Head from \"next/head\";\nimport awsExports from \"../src/aws-exports\";\nimport { createPost } from \"../src/graphql/mutations\";\nimport styles from \"../styles/Home.module.css\";\nAmplify.configure(_objectSpread(_objectSpread({}, awsExports), {}, {\n  ssr: true\n}));\n\nfunction handleCreatePost(_x) {\n  return _handleCreatePost.apply(this, arguments);\n}\n\nfunction _handleCreatePost() {\n  _handleCreatePost = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n    var form, _yield$API$graphql, data, _console, errors;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            event.preventDefault();\n            form = new FormData(event.target);\n            _context.prev = 2;\n            _context.next = 5;\n            return API.graphql({\n              authMode: \"AMAZON_COGNITO_USER_POOLS\",\n              query: createPost,\n              variables: {\n                input: {\n                  title: form.get(\"title\"),\n                  content: form.get(\"content\")\n                }\n              }\n            });\n\n          case 5:\n            _yield$API$graphql = _context.sent;\n            data = _yield$API$graphql.data;\n            window.location.href = \"/posts/\".concat(data.createPost.id);\n            _context.next = 15;\n            break;\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](2);\n            errors = _context.t0.errors;\n\n            (_console = console).error.apply(_console, _toConsumableArray(errors));\n\n            throw new Error(errors[0].message);\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[2, 10]]);\n  }));\n  return _handleCreatePost.apply(this, arguments);\n}\n\nexport var __N_SSP = true;\nexport default function Home(_ref) {\n  var _ref$posts = _ref.posts,\n      posts = _ref$posts === void 0 ? [] : _ref$posts;\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxs(Head, {\n      children: [/*#__PURE__*/_jsx(\"title\", {\n        children: \"Amplify + Next.js\"\n      }), /*#__PURE__*/_jsx(\"link\", {\n        rel: \"icon\",\n        href: \"/favicon.ico\"\n      })]\n    }), /*#__PURE__*/_jsxs(\"main\", {\n      className: styles.main,\n      children: [/*#__PURE__*/_jsx(\"h1\", {\n        className: styles.title,\n        children: \"Amplify + Next.js\"\n      }), /*#__PURE__*/_jsxs(\"p\", {\n        className: styles.description,\n        children: [/*#__PURE__*/_jsx(\"code\", {\n          className: styles.code,\n          children: posts.length\n        }), \"posts\"]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.grid,\n        children: [posts.map(function (post) {\n          return /*#__PURE__*/_jsxs(\"a\", {\n            className: styles.card,\n            href: \"/posts/\".concat(post.id),\n            children: [/*#__PURE__*/_jsx(\"h3\", {\n              children: post.title\n            }), /*#__PURE__*/_jsx(\"p\", {\n              children: post.content\n            })]\n          }, post.id);\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.card,\n          children: [/*#__PURE__*/_jsx(\"h3\", {\n            className: styles.title,\n            children: \"New Post\"\n          }), /*#__PURE__*/_jsx(AmplifyAuthenticator, {\n            children: /*#__PURE__*/_jsxs(\"form\", {\n              onSubmit: handleCreatePost,\n              children: [/*#__PURE__*/_jsxs(\"fieldset\", {\n                children: [/*#__PURE__*/_jsx(\"legend\", {\n                  children: \"Title\"\n                }), /*#__PURE__*/_jsx(\"input\", {\n                  defaultValue: \"Today, \".concat(new Date().toLocaleTimeString()),\n                  name: \"title\"\n                })]\n              }), /*#__PURE__*/_jsxs(\"fieldset\", {\n                children: [/*#__PURE__*/_jsx(\"legend\", {\n                  children: \"Content\"\n                }), /*#__PURE__*/_jsx(\"textarea\", {\n                  defaultValue: \"I built an Amplify app with Next.js!\",\n                  name: \"content\"\n                })]\n              }), /*#__PURE__*/_jsx(\"button\", {\n                children: \"Create Post\"\n              }), /*#__PURE__*/_jsx(\"button\", {\n                type: \"button\",\n                onClick: function onClick() {\n                  return Auth.signOut();\n                },\n                children: \"Sign out\"\n              })]\n            })\n          })]\n        })]\n      })]\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}