{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\vimal\\\\Desktop\\\\project v2\\\\AmplifyTest\\\\AMPLIFYNEXT\\\\next-amplified\\\\pages\\\\posts\\\\[id].js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Amplify, API, withSSRContext } from \"aws-amplify\";\nimport Head from \"next/head\";\nimport { useRouter } from \"next/router\";\nimport awsExports from \"../../src/aws-exports\";\nimport { deletePost } from \"../../src/graphql/mutations\";\nimport { getPost, listPosts } from \"../../../src/graphql/queries\";\nimport styles from \"../../styles/Home.module.css\";\nAmplify.configure(_objectSpread(_objectSpread({}, awsExports), {}, {\n  ssr: true\n}));\nexport async function getStaticPaths() {\n  const SSR = withSSRContext();\n  const {\n    data\n  } = await SSR.API.graphql({\n    query: listPosts\n  });\n  const paths = data.listPosts.items.map(post => ({\n    params: {\n      id: post.id\n    }\n  }));\n  return {\n    fallback: true,\n    paths\n  };\n}\n\nasync function handleBack() {\n  event.preventDefault();\n\n  try {\n    window.location.href = `/`;\n  } catch ({\n    errors\n  }) {\n    console.error(...errors);\n    throw new Error(errors[0].message);\n  }\n}\n\nexport async function getStaticProps({\n  params\n}) {\n  const SSR = withSSRContext();\n  const {\n    data\n  } = await SSR.API.graphql({\n    query: getPost,\n    variables: {\n      id: params.id\n    }\n  });\n  return {\n    props: {\n      post: data.getPost\n    }\n  };\n}\nexport default function Post({\n  post\n}) {\n  const router = useRouter();\n\n  if (router.isFallback) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.container,\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: styles.title,\n        children: \"Loading\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this);\n  }\n\n  async function handleDelete() {\n    try {\n      await API.graphql({\n        authMode: \"AMAZON_COGNITO_USER_POOLS\",\n        query: deletePost,\n        variables: {\n          input: {\n            id: post.id\n          }\n        }\n      });\n      window.location.href = \"/\";\n    } catch ({\n      errors\n    }) {\n      console.error(...errors);\n      throw new Error(errors[0].message);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: [/*#__PURE__*/_jsxDEV(\"title\", {\n        children: [post.title, \" \\u2013 Amplify + Next.js\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n        rel: \"icon\",\n        href: \"/favicon.ico\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: styles.main,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: styles.title,\n        children: post.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.description,\n        children: post.content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: styles.footer,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleBack,\n        children: \"Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: styles.footer,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleDelete,\n        children: \"\\uD83D\\uDCA5 Delete post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["C:/Users/vimal/Desktop/project v2/AmplifyTest/AMPLIFYNEXT/next-amplified/pages/posts/[id].js"],"names":["Amplify","API","withSSRContext","Head","useRouter","awsExports","deletePost","getPost","listPosts","styles","configure","ssr","getStaticPaths","SSR","data","graphql","query","paths","items","map","post","params","id","fallback","handleBack","event","preventDefault","window","location","href","errors","console","error","Error","message","getStaticProps","variables","props","Post","router","isFallback","container","title","handleDelete","authMode","input","main","description","content","footer"],"mappings":"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","sourcesContent":["import { Amplify, API, withSSRContext } from \"aws-amplify\";\r\nimport Head from \"next/head\";\r\nimport { useRouter } from \"next/router\";\r\nimport awsExports from \"../../src/aws-exports\";\r\nimport { deletePost } from \"../../src/graphql/mutations\";\r\nimport { getPost, listPosts } from \"../../../src/graphql/queries\";\r\nimport styles from \"../../styles/Home.module.css\";\r\n\r\nAmplify.configure({ ...awsExports, ssr: true });\r\n\r\nexport async function getStaticPaths() {\r\n  const SSR = withSSRContext();\r\n  const { data } = await SSR.API.graphql({ query: listPosts });\r\n  const paths = data.listPosts.items.map((post) => ({\r\n    params: { id: post.id },\r\n  }));\r\n\r\n  return {\r\n    fallback: true,\r\n    paths,\r\n  };\r\n}\r\n\r\nasync function handleBack() {\r\n  event.preventDefault();\r\n\r\n  try {\r\n    window.location.href = `/`;\r\n  } catch ({ errors }) {\r\n    console.error(...errors);\r\n    throw new Error(errors[0].message);\r\n  }\r\n}\r\n\r\nexport async function getStaticProps({ params }) {\r\n  const SSR = withSSRContext();\r\n  const { data } = await SSR.API.graphql({\r\n    query: getPost,\r\n    variables: {\r\n      id: params.id,\r\n    },\r\n  });\r\n\r\n  return {\r\n    props: {\r\n      post: data.getPost,\r\n    },\r\n  };\r\n}\r\n\r\nexport default function Post({ post }) {\r\n  const router = useRouter();\r\n\r\n  if (router.isFallback) {\r\n    return (\r\n      <div className={styles.container}>\r\n        <h1 className={styles.title}>Loading&hellip;</h1>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  async function handleDelete() {\r\n    try {\r\n      await API.graphql({\r\n        authMode: \"AMAZON_COGNITO_USER_POOLS\",\r\n        query: deletePost,\r\n        variables: {\r\n          input: { id: post.id },\r\n        },\r\n      });\r\n\r\n      window.location.href = \"/\";\r\n    } catch ({ errors }) {\r\n      console.error(...errors);\r\n      throw new Error(errors[0].message);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <Head>\r\n        <title>{post.title} – Amplify + Next.js</title>\r\n        <link rel=\"icon\" href=\"/favicon.ico\" />\r\n      </Head>\r\n\r\n      <main className={styles.main}>\r\n        <h1 className={styles.title}>{post.title}</h1>\r\n\r\n        <p className={styles.description}>{post.content}</p>\r\n      </main>\r\n\r\n      <footer className={styles.footer}>\r\n        <button onClick={handleBack}>Back</button>\r\n      </footer>\r\n      <footer className={styles.footer}>\r\n        <button onClick={handleDelete}>💥 Delete post</button>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}