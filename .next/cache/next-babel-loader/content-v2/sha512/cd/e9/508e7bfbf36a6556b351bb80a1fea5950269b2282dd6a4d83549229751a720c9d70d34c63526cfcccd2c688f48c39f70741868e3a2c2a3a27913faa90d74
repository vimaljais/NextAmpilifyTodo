{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/vimal/Desktop/project v2/AmplifyTest/AMPLIFYNEXT/next-amplified/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"C:/Users/vimal/Desktop/project v2/AmplifyTest/AMPLIFYNEXT/next-amplified/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _asyncToGenerator from \"C:/Users/vimal/Desktop/project v2/AmplifyTest/AMPLIFYNEXT/next-amplified/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:/Users/vimal/Desktop/project v2/AmplifyTest/AMPLIFYNEXT/next-amplified/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\vimal\\\\Desktop\\\\project v2\\\\AmplifyTest\\\\AMPLIFYNEXT\\\\next-amplified\\\\pages\\\\index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { AmplifyAuthenticator } from \"@aws-amplify/ui-react\";\nimport { Amplify, API, Auth } from \"aws-amplify\";\nimport Head from \"next/head\";\nimport awsExports from \"../src/aws-exports\";\nimport { createPost } from \"../src/graphql/mutations\";\nimport styles from \"../styles/Home.module.css\";\nAmplify.configure(_objectSpread(_objectSpread({}, awsExports), {}, {\n  ssr: true\n}));\n\nfunction handleCreatePost(_x) {\n  return _handleCreatePost.apply(this, arguments);\n}\n\nfunction _handleCreatePost() {\n  _handleCreatePost = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n    var form, _yield$API$graphql, data, _console, errors;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            event.preventDefault();\n            form = new FormData(event.target);\n            _context.prev = 2;\n            _context.next = 5;\n            return API.graphql({\n              authMode: \"AMAZON_COGNITO_USER_POOLS\",\n              query: createPost,\n              variables: {\n                input: {\n                  title: form.get(\"title\"),\n                  content: form.get(\"content\")\n                }\n              }\n            });\n\n          case 5:\n            _yield$API$graphql = _context.sent;\n            data = _yield$API$graphql.data;\n            window.location.href = \"/posts/\".concat(data.createPost.id);\n            _context.next = 15;\n            break;\n\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](2);\n            errors = _context.t0.errors;\n\n            (_console = console).error.apply(_console, _toConsumableArray(errors));\n\n            throw new Error(errors[0].message);\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[2, 10]]);\n  }));\n  return _handleCreatePost.apply(this, arguments);\n}\n\nexport var __N_SSP = true;\nexport default function Home(_ref) {\n  var _this = this;\n\n  var _ref$posts = _ref.posts,\n      posts = _ref$posts === void 0 ? [] : _ref$posts;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: [/*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Amplify + Next.js\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n        rel: \"icon\",\n        href: \"/favicon.ico\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: styles.main,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: styles.title,\n        children: \"Amplify + Next.js\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.description,\n        children: [/*#__PURE__*/_jsxDEV(\"code\", {\n          className: styles.code,\n          children: posts.length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), \"posts\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.grid,\n        children: [posts.map(function (post) {\n          return /*#__PURE__*/_jsxDEV(\"a\", {\n            className: styles.card,\n            href: \"/posts/\".concat(post.id),\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: post.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: post.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 15\n            }, _this)]\n          }, post.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, _this);\n        }), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.card,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: styles.title,\n            children: \"New Post\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(AmplifyAuthenticator, {\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleCreatePost,\n              children: [/*#__PURE__*/_jsxDEV(\"fieldset\", {\n                children: [/*#__PURE__*/_jsxDEV(\"legend\", {\n                  children: \"Title\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 76,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  defaultValue: \"Today, \".concat(new Date().toLocaleTimeString()),\n                  name: \"title\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 77,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n                children: [/*#__PURE__*/_jsxDEV(\"legend\", {\n                  children: \"Content\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 84,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  defaultValue: \"I built an Amplify app with Next.js!\",\n                  name: \"content\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                children: \"Create Post\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: function onClick() {\n                  return Auth.signOut();\n                },\n                children: \"Sign out\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["C:/Users/vimal/Desktop/project v2/AmplifyTest/AMPLIFYNEXT/next-amplified/pages/index.js"],"names":["AmplifyAuthenticator","Amplify","API","Auth","Head","awsExports","createPost","styles","configure","ssr","handleCreatePost","event","preventDefault","form","FormData","target","graphql","authMode","query","variables","input","title","get","content","data","window","location","href","id","errors","console","error","Error","message","Home","posts","container","main","description","code","length","grid","map","post","card","Date","toLocaleTimeString","signOut"],"mappings":"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","sourcesContent":["import { AmplifyAuthenticator } from \"@aws-amplify/ui-react\";\nimport { Amplify, API, Auth, withSSRContext } from \"aws-amplify\";\nimport Head from \"next/head\";\nimport awsExports from \"../src/aws-exports\";\nimport { createPost } from \"../src/graphql/mutations\";\nimport { listPosts } from \"../src/graphql/queries\";\nimport styles from \"../styles/Home.module.css\";\n\nAmplify.configure({ ...awsExports, ssr: true });\n\nexport async function getServerSideProps({ req }) {\n  const SSR = withSSRContext({ req });\n  const response = await SSR.API.graphql({ query: listPosts });\n\n  return {\n    props: {\n      posts: response.data.listPosts.items,\n    },\n  };\n}\n\nasync function handleCreatePost(event) {\n  event.preventDefault();\n\n  const form = new FormData(event.target);\n\n  try {\n    const { data } = await API.graphql({\n      authMode: \"AMAZON_COGNITO_USER_POOLS\",\n      query: createPost,\n      variables: {\n        input: {\n          title: form.get(\"title\"),\n          content: form.get(\"content\"),\n        },\n      },\n    });\n\n    window.location.href = `/posts/${data.createPost.id}`;\n  } catch ({ errors }) {\n    console.error(...errors);\n    throw new Error(errors[0].message);\n  }\n}\n\nexport default function Home({ posts = [] }) {\n  return (\n    <div className={styles.container}>\n      <Head>\n        <title>Amplify + Next.js</title>\n        <link rel=\"icon\" href=\"/favicon.ico\" />\n      </Head>\n\n      <main className={styles.main}>\n        <h1 className={styles.title}>Amplify + Next.js</h1>\n\n        <p className={styles.description}>\n          <code className={styles.code}>{posts.length}</code>\n          posts\n        </p>\n\n        <div className={styles.grid}>\n          {posts.map((post) => (\n            <a className={styles.card} href={`/posts/${post.id}`} key={post.id}>\n              <h3>{post.title}</h3>\n              <p>{post.content}</p>\n            </a>\n          ))}\n\n          <div className={styles.card}>\n            <h3 className={styles.title}>New Post</h3>\n\n            <AmplifyAuthenticator>\n              <form onSubmit={handleCreatePost}>\n                <fieldset>\n                  <legend>Title</legend>\n                  <input\n                    defaultValue={`Today, ${new Date().toLocaleTimeString()}`}\n                    name=\"title\"\n                  />\n                </fieldset>\n\n                <fieldset>\n                  <legend>Content</legend>\n                  <textarea\n                    defaultValue=\"I built an Amplify app with Next.js!\"\n                    name=\"content\"\n                  />\n                </fieldset>\n\n                <button>Create Post</button>\n                <button type=\"button\" onClick={() => Auth.signOut()}>\n                  Sign out\n                </button>\n              </form>\n            </AmplifyAuthenticator>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}