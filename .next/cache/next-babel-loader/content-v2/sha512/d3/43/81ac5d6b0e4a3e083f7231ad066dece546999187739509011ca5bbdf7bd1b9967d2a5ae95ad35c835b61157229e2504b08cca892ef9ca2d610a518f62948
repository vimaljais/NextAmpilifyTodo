{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\vimal\\\\Desktop\\\\project v2\\\\AmplifyTest\\\\AMPLIFYNEXT\\\\next-amplified\\\\pages\\\\index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// pages/index.js\nimport { AmplifyAuthenticator } from \"@aws-amplify/ui-react\";\nimport { Amplify, API, Auth, withSSRContext } from \"aws-amplify\";\nimport Head from \"next/head\";\nimport awsExports from \"../src/aws-exports\";\nimport { createPost } from \"../src/graphql/mutations\";\nimport { listPosts } from \"../src/graphql/queries\";\nimport styles from \"../styles/Home.module.css\";\nAmplify.configure(_objectSpread(_objectSpread({}, awsExports), {}, {\n  ssr: true\n}));\nexport async function getServerSideProps({\n  req\n}) {\n  const SSR = withSSRContext({\n    req\n  });\n  const response = await SSR.API.graphql({\n    query: listPosts\n  });\n  return {\n    props: {\n      posts: response.data.listPosts.items\n    }\n  };\n}\n\nasync function handleCreatePost(event) {\n  event.preventDefault();\n  const form = new FormData(event.target);\n\n  try {\n    const {\n      data\n    } = await API.graphql({\n      authMode: \"AMAZON_COGNITO_USER_POOLS\",\n      query: createPost,\n      variables: {\n        input: {\n          title: form.get(\"title\"),\n          content: form.get(\"content\")\n        }\n      }\n    });\n    window.location.href = `/posts/${data.createPost.id}`;\n  } catch ({\n    errors\n  }) {\n    console.error(...errors);\n    throw new Error(errors[0].message);\n  }\n}\n\nexport default function Home({\n  posts = []\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: [/*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Amplify + Next.js\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n        rel: \"icon\",\n        href: \"/favicon.ico\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: styles.main,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: styles.title,\n        children: \"Amplify + Next.js\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.description,\n        children: [/*#__PURE__*/_jsxDEV(\"code\", {\n          className: styles.code,\n          children: posts.length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), \"posts\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.grid,\n        children: [posts.map(post => /*#__PURE__*/_jsxDEV(\"a\", {\n          className: styles.card,\n          href: `/posts/${post.id}`,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: post.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: post.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 15\n          }, this)]\n        }, post.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.card,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: styles.title,\n            children: \"New Post\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(AmplifyAuthenticator, {\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleCreatePost,\n              children: [/*#__PURE__*/_jsxDEV(\"fieldset\", {\n                children: [/*#__PURE__*/_jsxDEV(\"legend\", {\n                  children: \"Title\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 77,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  defaultValue: `Today, ${new Date().toLocaleTimeString()}`,\n                  name: \"title\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 78,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n                children: [/*#__PURE__*/_jsxDEV(\"legend\", {\n                  children: \"Content\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  defaultValue: \"I built an Amplify app with Next.js!\",\n                  name: \"content\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 86,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                children: \"Create Post\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => Auth.signOut(),\n                children: \"Sign out\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["C:/Users/vimal/Desktop/project v2/AmplifyTest/AMPLIFYNEXT/next-amplified/pages/index.js"],"names":["AmplifyAuthenticator","Amplify","API","Auth","withSSRContext","Head","awsExports","createPost","listPosts","styles","configure","ssr","getServerSideProps","req","SSR","response","graphql","query","props","posts","data","items","handleCreatePost","event","preventDefault","form","FormData","target","authMode","variables","input","title","get","content","window","location","href","id","errors","console","error","Error","message","Home","container","main","description","code","length","grid","map","post","card","Date","toLocaleTimeString","signOut"],"mappings":"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","sourcesContent":["// pages/index.js\nimport { AmplifyAuthenticator } from \"@aws-amplify/ui-react\";\nimport { Amplify, API, Auth, withSSRContext } from \"aws-amplify\";\nimport Head from \"next/head\";\nimport awsExports from \"../src/aws-exports\";\nimport { createPost } from \"../src/graphql/mutations\";\nimport { listPosts } from \"../src/graphql/queries\";\nimport styles from \"../styles/Home.module.css\";\n\nAmplify.configure({ ...awsExports, ssr: true });\n\nexport async function getServerSideProps({ req }) {\n  const SSR = withSSRContext({ req });\n  const response = await SSR.API.graphql({ query: listPosts });\n\n  return {\n    props: {\n      posts: response.data.listPosts.items,\n    },\n  };\n}\n\nasync function handleCreatePost(event) {\n  event.preventDefault();\n\n  const form = new FormData(event.target);\n\n  try {\n    const { data } = await API.graphql({\n      authMode: \"AMAZON_COGNITO_USER_POOLS\",\n      query: createPost,\n      variables: {\n        input: {\n          title: form.get(\"title\"),\n          content: form.get(\"content\"),\n        },\n      },\n    });\n\n    window.location.href = `/posts/${data.createPost.id}`;\n  } catch ({ errors }) {\n    console.error(...errors);\n    throw new Error(errors[0].message);\n  }\n}\n\nexport default function Home({ posts = [] }) {\n  return (\n    <div className={styles.container}>\n      <Head>\n        <title>Amplify + Next.js</title>\n        <link rel=\"icon\" href=\"/favicon.ico\" />\n      </Head>\n\n      <main className={styles.main}>\n        <h1 className={styles.title}>Amplify + Next.js</h1>\n\n        <p className={styles.description}>\n          <code className={styles.code}>{posts.length}</code>\n          posts\n        </p>\n\n        <div className={styles.grid}>\n          {posts.map((post) => (\n            <a className={styles.card} href={`/posts/${post.id}`} key={post.id}>\n              <h3>{post.title}</h3>\n              <p>{post.content}</p>\n            </a>\n          ))}\n\n          <div className={styles.card}>\n            <h3 className={styles.title}>New Post</h3>\n\n            <AmplifyAuthenticator>\n              <form onSubmit={handleCreatePost}>\n                <fieldset>\n                  <legend>Title</legend>\n                  <input\n                    defaultValue={`Today, ${new Date().toLocaleTimeString()}`}\n                    name=\"title\"\n                  />\n                </fieldset>\n\n                <fieldset>\n                  <legend>Content</legend>\n                  <textarea\n                    defaultValue=\"I built an Amplify app with Next.js!\"\n                    name=\"content\"\n                  />\n                </fieldset>\n\n                <button>Create Post</button>\n                <button type=\"button\" onClick={() => Auth.signOut()}>\n                  Sign out\n                </button>\n              </form>\n            </AmplifyAuthenticator>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}