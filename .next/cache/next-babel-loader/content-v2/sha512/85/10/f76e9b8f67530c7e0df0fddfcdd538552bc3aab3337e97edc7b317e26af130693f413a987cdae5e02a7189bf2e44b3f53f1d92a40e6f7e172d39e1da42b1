{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/vimal/Desktop/project v2/AmplifyTest/AMPLIFYNEXT/next-amplified/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"C:/Users/vimal/Desktop/project v2/AmplifyTest/AMPLIFYNEXT/next-amplified/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _asyncToGenerator from \"C:/Users/vimal/Desktop/project v2/AmplifyTest/AMPLIFYNEXT/next-amplified/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:/Users/vimal/Desktop/project v2/AmplifyTest/AMPLIFYNEXT/next-amplified/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\vimal\\\\Desktop\\\\project v2\\\\AmplifyTest\\\\AMPLIFYNEXT\\\\next-amplified\\\\pages\\\\posts\\\\[id].js\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Amplify, API } from \"aws-amplify\";\nimport Head from \"next/head\";\nimport { useRouter } from \"next/router\";\nimport awsExports from \"../../src/aws-exports\";\nimport { deletePost } from \"../../src/graphql/mutations\";\nimport styles from \"../../styles/Home.module.css\";\nAmplify.configure(_objectSpread(_objectSpread({}, awsExports), {}, {\n  ssr: true\n}));\n\nfunction handleBack() {\n  return _handleBack.apply(this, arguments);\n}\n\nfunction _handleBack() {\n  _handleBack = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var _console2, errors;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            event.preventDefault();\n            _context2.prev = 1;\n            window.location.href = \"/\";\n            _context2.next = 10;\n            break;\n\n          case 5:\n            _context2.prev = 5;\n            _context2.t0 = _context2[\"catch\"](1);\n            errors = _context2.t0.errors;\n\n            (_console2 = console).error.apply(_console2, _toConsumableArray(errors));\n\n            throw new Error(errors[0].message);\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[1, 5]]);\n  }));\n  return _handleBack.apply(this, arguments);\n}\n\nexport var __N_SSG = true;\nexport default function Post(_ref) {\n  _s();\n\n  var post = _ref.post;\n  var router = useRouter();\n\n  if (router.isFallback) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.container,\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: styles.title,\n        children: \"Loading\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this);\n  }\n\n  function handleDelete() {\n    return _handleDelete.apply(this, arguments);\n  }\n\n  function _handleDelete() {\n    _handleDelete = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _console, errors;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return API.graphql({\n                authMode: \"AMAZON_COGNITO_USER_POOLS\",\n                query: deletePost,\n                variables: {\n                  input: {\n                    id: post.id\n                  }\n                }\n              });\n\n            case 3:\n              window.location.href = \"/\";\n              _context.next = 11;\n              break;\n\n            case 6:\n              _context.prev = 6;\n              _context.t0 = _context[\"catch\"](0);\n              errors = _context.t0.errors;\n\n              (_console = console).error.apply(_console, _toConsumableArray(errors));\n\n              throw new Error(errors[0].message);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 6]]);\n    }));\n    return _handleDelete.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: [/*#__PURE__*/_jsxDEV(\"title\", {\n        children: [post.title, \" \\u2013 Amplify + Next.js\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n        rel: \"icon\",\n        href: \"/favicon.ico\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: styles.main,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: styles.title,\n        children: post.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.description,\n        children: post.content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: styles.footer,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleBack,\n        children: \"Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: styles.footer,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleDelete,\n        children: \"\\uD83D\\uDCA5 Delete post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Post, \"fN7XvhJ+p5oE6+Xlo0NJmXpxjC8=\", false, function () {\n  return [useRouter];\n});\n\n_c = Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"sources":["C:/Users/vimal/Desktop/project v2/AmplifyTest/AMPLIFYNEXT/next-amplified/pages/posts/[id].js"],"names":["Amplify","API","Head","useRouter","awsExports","deletePost","styles","configure","ssr","handleBack","event","preventDefault","window","location","href","errors","console","error","Error","message","Post","post","router","isFallback","container","title","handleDelete","graphql","authMode","query","variables","input","id","main","description","content","footer"],"mappings":"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","sourcesContent":["import { Amplify, API, withSSRContext } from \"aws-amplify\";\r\nimport Head from \"next/head\";\r\nimport { useRouter } from \"next/router\";\r\nimport awsExports from \"../../src/aws-exports\";\r\nimport { deletePost } from \"../../src/graphql/mutations\";\r\nimport { getPost, listPosts } from \"../../src/graphql/queries\";\r\nimport styles from \"../../styles/Home.module.css\";\r\n\r\nAmplify.configure({ ...awsExports, ssr: true });\r\n\r\nexport async function getStaticPaths() {\r\n  const SSR = withSSRContext();\r\n  const { data } = await SSR.API.graphql({ query: listPosts });\r\n  const paths = data.listPosts.items.map((post) => ({\r\n    params: { id: post.id },\r\n  }));\r\n\r\n  return {\r\n    fallback: true,\r\n    paths,\r\n  };\r\n}\r\n\r\nasync function handleBack() {\r\n  event.preventDefault();\r\n\r\n  try {\r\n    window.location.href = `/`;\r\n  } catch ({ errors }) {\r\n    console.error(...errors);\r\n    throw new Error(errors[0].message);\r\n  }\r\n}\r\n\r\nexport async function getStaticProps({ params }) {\r\n  const SSR = withSSRContext();\r\n  const { data } = await SSR.API.graphql({\r\n    query: getPost,\r\n    variables: {\r\n      id: params.id,\r\n    },\r\n  });\r\n\r\n  return {\r\n    props: {\r\n      post: data.getPost,\r\n    },\r\n  };\r\n}\r\n\r\nexport default function Post({ post }) {\r\n  const router = useRouter();\r\n\r\n  if (router.isFallback) {\r\n    return (\r\n      <div className={styles.container}>\r\n        <h1 className={styles.title}>Loading&hellip;</h1>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  async function handleDelete() {\r\n    try {\r\n      await API.graphql({\r\n        authMode: \"AMAZON_COGNITO_USER_POOLS\",\r\n        query: deletePost,\r\n        variables: {\r\n          input: { id: post.id },\r\n        },\r\n      });\r\n\r\n      window.location.href = \"/\";\r\n    } catch ({ errors }) {\r\n      console.error(...errors);\r\n      throw new Error(errors[0].message);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <Head>\r\n        <title>{post.title} – Amplify + Next.js</title>\r\n        <link rel=\"icon\" href=\"/favicon.ico\" />\r\n      </Head>\r\n\r\n      <main className={styles.main}>\r\n        <h1 className={styles.title}>{post.title}</h1>\r\n\r\n        <p className={styles.description}>{post.content}</p>\r\n      </main>\r\n\r\n      <footer className={styles.footer}>\r\n        <button onClick={handleBack}>Back</button>\r\n      </footer>\r\n      <footer className={styles.footer}>\r\n        <button onClick={handleDelete}>💥 Delete post</button>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}